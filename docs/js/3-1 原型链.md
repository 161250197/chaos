# 3-1 原型链

JavaScript 只有一种结构：对象。

每个实例对象（ object ）都有一个私有属性（称之为 \_\_proto\_\_ ）指向它的构造函数的原型对象（**prototype** ）。该原型对象也有一个自己的原型对象( \_\_proto\_\_ ) ，层层向上直到一个对象的原型对象为 `null`。根据定义，`null` 没有原型，并作为这个**原型链**中的最后一个环节。

## 原型链的顶端

**null**

~~~javascript
function f() {}
var o = new f();
o.constructor; // f
o.__proto__; // { constructor: f }，一个包含 constructor 构造方法的对象，也就是对象 o 的原型对象
o.__proto__ === Object.getPrototypeOf(o); // true，__proto__ 是非标准的，es6 实现了 Object.getPrototypeOf 方法获取原型对象
// o.__proto__ === o.[[Prototype]]; 该符号也用于指向原型对象，但双括号标识的属性 JS 无法直接使用
o.__proto__ === f.prototype; // 对象的原型对象 和 对象的构造函数的 prototype 属性是等价的
~~~

## Tricks

### Function.prototype 指向的是什么？

除了 `undefined` 和 `null` 之外的基本数据类型的原型，也是通过 `new Function` 创建的所有对象的原型。

~~~
Function.prototype; // ƒ () { [native code] }

Number.__proto__ === Function.prototype; // true
Boolean.__proto__ === Function.prototype; // true
String.__proto__ === Function.prototype; // true
BigInt.__proto__ === Function.prototype; // true
Symbol.__proto__ === Function.prototype; // true
Function.__proto__ === Function.prototype; // true
Object.__proto__ === Function.prototype; // true

var f = new Function();
f.__proto__ === Function.prototype; // true
~~~

Function.prototype 就相当于一个普通对象，其构造函数是 Object，向上两层可以到达null。

~~~javascript
(Function.__proto__).__proto__; // { constructor: Object }
(Function.__proto__).__proto__.__proto__; // null

Math.__proto__.__proto__; // null
var o = new Object();
o.__proto__.__proto__; // null
~~~

## 总结

`__proto__` 指对象的原型对象

`prototype` 指以该函数作为构造函数所创建的对象的原型对象

## 参考资料

[继承与原型链 - JavaScript | MDN](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Inheritance_and_the_prototype_chain)

TODO

* Function.prototype; // ƒ () { [native code] } 探查

